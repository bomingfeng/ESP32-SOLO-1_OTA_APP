<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
    <meta charset="UTF-8">
    <title>ESP32 configuration</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 每30秒刷新页面： -->
    <meta http-equiv="refresh" content="30">

    <!-- <script> 标签用于定义客户端脚本，比如 JavaScript。
         <script> 元素既可包含脚本语句，也可以通过 "src" 属性指向外部脚本文件 -->
    <script src="jquery-3.4.1.min.js"></script>

	<script>
	$(document).ready(function() {
		$("#set_config").click(function() {
			var data = {};
			console.log('ClickFunction');	
			if(ssid_text.value != '')
			{
				var data = {'ssid':ssid_text.value,'pass':pass_text.value};
				$.ajax({
				url: 'setConfig',
				type: 'POST',
				contentType:'application/json',
				data: JSON.stringify(data),
				dataType:'json'
				});
			} 
			else 
			{
				var errorText = ''
				if(ssid_text.value == '') {
					errorText = 'Missing SSID\n';
				}
				alert(errorText);
			}
		});
	});
	</script>
</head>

<body>
    <div data-role="page">
 
        <div data-role="header">
            <h1>WiFi configuration page</h1>
        </div><!-- /header -->
		
        <div role="main" class="ui-content">
			<h3>WiFi credentials</h2>
			<div>
				<label for="ssid_text">SSID</label>
				<input type="text" name="ssid_text" id="ssid_text" required>
				<label for="pass_text">Password</label>
				<input type="password" name="pass_text" id="pass_text" minlength="8" required>
				<input type="button" id="set_config" value="SET">
			</div>
		</div>
	</div><!-- /content -->
	</body>
</html>